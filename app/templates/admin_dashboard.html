{% extends 'navbar.html' %}

{% block content %}
<h2 style="
    text-align: center; 
    font-size: 2rem; 
    color: #2e8b57; 
    margin: 20px 0; 
    font-family: 'Arial', sans-serif;
">
    Admin Dashboard
</h2>

<!-- Show success/error messages -->
{% if messages %}
    <ul style="
        list-style: none; 
        padding: 10px; 
        max-width: 500px; 
        margin: 10px auto; 
        border-radius: 6px;
        background: #f0fff0;
        border: 1px solid #2e8b57;
        font-size: 1rem;
        color: #2e8b57;
        font-family: 'Arial', sans-serif;
    ">
        {% for message in messages %}
            <li style="padding: 5px 0; text-align: center;">
                {{ message }}
            </li>
        {% endfor %}
    </ul>
{% endif %}

<table border="0" cellpadding="10" cellspacing="0" style="
    width: 90%;
    margin: 20px auto;
    border-collapse: collapse;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-family: 'Arial', sans-serif;
    background: white;
    border-radius: 10px;
    overflow: hidden;
">
    <tr style="background: #2e8b57; color: white; text-align: left;">
        <th style="padding: 12px;">ID</th>
        <th style="padding: 12px;">Patient Name</th>
        <th style="padding: 12px;">Patient Age</th>
        <th style="padding: 12px;">Patient Phone Number</th>
        <th style="padding: 12px;">Patient Email</th>
        <th style="padding: 12px;">Action</th>
    </tr>
    {% for data in patient_details %}
    <tr style="border-bottom: 1px solid #ddd; transition: background 0.3s;">
        <td style="padding: 12px; text-align: center;">{{ data.id }}</td>
        <td style="padding: 12px;">{{ data.patient_name }}</td>
        <td style="padding: 12px; text-align: center;">{{ data.patient_age }}</td>
        <td style="padding: 12px; text-align: center;">{{ data.patient_phone }}</td>
        <td style="padding: 12px;">{{ data.patient_email }}</td>
        <td style="padding: 12px; text-align: center;">
            <a href="{% url 'delete_p_details' data.id %}" 
               onclick="return confirm('Are you sure you want to delete this record?');"
               style="color: #d9534f; text-decoration: none; font-weight: bold; padding: 6px 10px; border-radius: 4px; background: #f9e0e0; transition: 0.3s;">
               Delete
            </a>
            &nbsp;|&nbsp;
            <a href="{% url 'approve_form' data.id %}" 
               onclick="return confirm('Go to Set Date and Time');"
               style="color: #5bc0de; text-decoration: none; font-weight: bold; padding: 6px 10px; border-radius: 4px; background: #e0f7fa; transition: 0.3s;">
               Approve Form
            </a>
            &nbsp;|&nbsp;
            <a class="approve-link" href="{% url 'approve' data.id %}" 
               onclick="return confirm('Are you sure you want to approve this patient?');"
               style="color: #4CAF50; text-decoration: none; font-weight: bold; padding: 6px 10px; border-radius: 4px; background: #e6f9e6; transition: 0.3s;">
               Approve
            </a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6" style="padding: 15px; text-align: center; color: #777;">No patient details found.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
